<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>순천시 병원 현황 시각화</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }
        .container {
            width: 100%;
            max-width: 960px;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            box-sizing: border-box;
        }
        .details-section {
            background-color: #f9fafb;
            border-radius: 0.5rem;
            margin-top: 1rem;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
        }
        .details-section.open {
            max-height: 500px; /* 충분히 큰 값으로 설정하여 부드러운 애니메이션 효과 */
            opacity: 1;
        }
        .toggle-button {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background-color: #e5e7eb;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }
        .analysis-section h2 {
            font-weight: bold;
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .analysis-section h3 {
            font-weight: bold;
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .sql-code {
            background-color: #1e293b; /* slate-800 */
            color: #e2e8f0; /* slate-200 */
            border-radius: 0.5rem;
            padding: 1.5rem;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .sql-code .comment {
            color: #94a3b8; /* slate-400 */
        }
        .sql-code .keyword {
            color: #fcd34d; /* amber-300 */
        }
        .sql-code .string {
            color: #6ee7b7; /* emerald-300 */
        }
    </style>
</head>
<body>

<div class="container">
    <h1 class="text-4xl font-bold text-center mb-6">순천시 병원 현황 시각화</h1>
    <p class="text-lg text-center text-gray-600 mb-8">병원 종류별 분포를 원형 차트로 확인하세요.</p>
    <div class="relative w-full h-96 mb-8">
        <canvas id="hospitalChart"></canvas>
    </div>

    <div id="detailsContainer"></div>

    <div class="mt-8 text-center text-sm text-gray-500">
        <p><strong>출처:</strong> 공공데이터포털(전라남도 순천시_병원(의원, 한의원, 치과의원) 현황_20210901)</p>
        <p>데이터는 2021년 9월 1일 기준입니다.</p>
    </div>

    <!-- 순천시 국립의대 및 대학병원 필요성 분석 섹션 -->
    <div class="analysis-section mt-12 pt-8 border-t border-gray-200">
        <h2 class="text-3xl font-bold text-center mb-6">순천시 국립의대 및 대학병원 설립 필요성 분석</h2>
        <div class="mb-6">
            <h3 class="text-xl font-bold">서론</h3>
            <p class="text-gray-700">전라남도 동부권은 200만 명에 달하는 인구 규모에 비해 중증 질환을 치료할 수 있는 의료 인프라가 부족하다는 심각한 문제에 직면해 있습니다. 이러한 의료 격차를 해소하고 지역민의 건강권을 보장하기 위해 순천시에 <strong>국립 의과대학 및 대학병원을 설립해야 한다는 목소리가 높습니다.</strong> 본 분석은 이 두 시설이 왜 필수적인지에 대한 논리적 근거를 제시하고자 합니다.</p>
        </div>
        <div class="mb-6">
            <h3 class="text-xl font-bold">전라남도 동부권의 의료 공백 문제</h3>
            <p class="text-gray-700">현재 순천을 포함한 전남 동부권은 수도권이나 광주광역시와 비교했을 때 상급종합병원이 전무합니다. 이로 인해 심혈관계 질환, 암 등 응급 상황이 발생했을 때 골든 타임을 놓치는 안타까운 사례가 발생하고 있습니다. 환자들은 고난도 수술이나 전문적인 치료를 받기 위해 먼 거리를 이동해야 하는 불편함을 겪고 있으며, 이는 경제적·심리적 부담으로 이어집니다. 지역 내 의료진 부족 문제 또한 심각하여, 안정적인 의료 서비스 공급이 어려운 상황입니다.</p>
        </div>
        <div class="mt-10 mb-6">
            <h3 class="text-xl font-bold text-center">국립의대 및 대학병원 설립의 필요성</h3>
            <div class="grid md:grid-cols-3 gap-8 mt-6">
                <!-- 1. 의료 격차 해소 -->
                <div class="flex flex-col items-center text-center p-6 bg-green-100 rounded-xl shadow-lg">
                    <svg class="w-16 h-16 text-green-600 mb-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
                    </svg>
                    <p class="text-lg font-bold text-green-800 mb-2">의료 격차 해소</p>
                    <p class="text-sm text-gray-700">지역 의료 공백을 메우고, 중증 질환에 대한 전문적이고 신속한 치료를 가능하게 하여 지역민의 건강권을 보장합니다.</p>
                </div>
                <!-- 2. 의료 인재 양성 -->
                <div class="flex flex-col items-center text-center p-6 bg-blue-100 rounded-xl shadow-lg">
                    <svg class="w-16 h-16 text-blue-600 mb-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 15.93l-6-3v-5.06l6 3.03 6-3.03v5.06l-6 3zM12 14L6 11l6-3 6 3-6 3z"/>
                    </svg>
                    <p class="text-lg font-bold text-blue-800 mb-2">의료 인재 양성</p>
                    <p class="text-sm text-gray-700">지역 맞춤형 인재를 직접 양성하고, 이들이 지역 대학병원에서 수련하여 안정적으로 지역 의료 시스템에 정착하도록 돕습니다.</p>
                </div>
                <!-- 3. 지역 경제 활성화 -->
                <div class="flex flex-col items-center text-center p-6 bg-yellow-100 rounded-xl shadow-lg">
                    <svg class="w-16 h-16 text-yellow-600 mb-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11 17h2v-6h-2v6zm4 0h2v-6h-2v6zm-8 0h2v-6h-2v6zm-2 4h18V3H3v18zM5 5h14v14H5V5z"/>
                    </svg>
                    <p class="text-lg font-bold text-yellow-800 mb-2">지역 경제 활성화</p>
                    <p class="text-sm text-gray-700">고용 창출과 유동 인구 증가로 지역 상권을 활성화하고, 첨단 의료 기술 연구의 중심지로서 도시 경쟁력을 강화합니다.</p>
                </div>
            </div>
        </div>
        <div>
            <h3 class="text-xl font-bold">결론 및 기대 효과</h3>
            <p class="text-gray-700">순천시에 국립의대와 대학병원을 설립하는 것은 단순한 병원 확충을 넘어, 전라남도 동부권 전체의 의료 환경을 혁신적으로 개선하는 전략적 투자입니다. 이를 통해 지역민은 더 가까운 곳에서 양질의 의료 서비스를 받을 수 있게 되며, 안정적인 의료 인력 공급과 지역 경제 활성화라는 두 마리 토끼를 모두 잡을 수 있습니다. 궁극적으로 이는 순천시가 <strong>'모두가 건강하고 행복한 도시'</strong>로 나아가는 중요한 전환점이 될 것입니다.</p>
        </div>
    </div>

    <!-- SQL 실습 예제 섹션 -->
    <div class="mt-12 pt-8 border-t border-gray-200">
        <h2 class="text-3xl font-bold text-center mb-6">SQL 실습 예제</h2>
        <p class="text-center text-gray-700 mb-6">제공된 순천시 병원 데이터를 활용한 간단한 SQL 쿼리 예시입니다. 가상의 `HOSPITALS` 테이블을 기반으로 작성되었습니다.</p>
        
        <div class="space-y-8">
            <!-- 테이블 생성 및 데이터 추가 -->
            <div>
                <h3 class="text-xl font-bold mb-2">테이블 생성 및 데이터 추가</h3>
                <p class="text-sm text-gray-600 mb-4">쿼리 실행을 위해 `HOSPITALS` 테이블을 생성하고, 몇 개의 샘플 데이터를 삽입합니다.</p>
                <pre class="sql-code"><code>
<span class="comment">-- 테이블이 이미 존재할 경우 삭제</span>
<span class="keyword">DROP TABLE</span> <span class="keyword">IF EXISTS</span> HOSPITALS;

<span class="comment">-- 병원 정보 테이블 생성</span>
<span class="keyword">CREATE TABLE</span> HOSPITALS (
    id <span class="keyword">INT</span> <span class="keyword">PRIMARY KEY</span>,
    type <span class="keyword">VARCHAR</span>(50),
    name <span class="keyword">VARCHAR</span>(100),
    address <span class="keyword">VARCHAR</span>(255),
    phone <span class="keyword">VARCHAR</span>(20)
);

<span class="comment">-- 샘플 데이터 삽입</span>
<span class="keyword">INSERT INTO</span> HOSPITALS (id, type, name, address, phone) <span class="keyword">VALUES</span>
(1, <span class="string">'한의원'</span>, <span class="string">'담뜰한의원'</span>, <span class="string">'전라남도 순천시 왕지로 36, 2층 203호 (왕지동)'</span>, <span class="string">'061-762-7577'</span>),
(2, <span class="string">'의원'</span>, <span class="string">'이소아과의원'</span>, <span class="string">'전라남도 순천시 조례못등길 54, 조은프라자 3층'</span>, <span class="string">'061-722-7900'</span>),
(3, <span class="string">'의원'</span>, <span class="string">'우리들내과의원'</span>, <span class="string">'전라남도 순천시 연향번영길 87 (연향동)'</span>, <span class="string">'061-725-7582'</span>),
(4, <span class="string">'치과의원'</span>, <span class="string">'새이화치과의원'</span>, <span class="string">'전라남도 순천시 왕지2길 17 (왕지동)'</span>, <span class="string">'061-722-2875'</span>),
(5, <span class="string">'치과의원'</span>, <span class="string">'서울치과의원'</span>, <span class="string">'전라남도 순천시 구암길 2 (연향동)'</span>, <span class="string">'061-744-2875'</span>),
(6, <span class="string">'치과의원'</span>, <span class="string">'프롬치과의원'</span>, <span class="string">'전라남도 순천시 왕궁길 47, 2층 (조례동)'</span>, <span class="string">'061-725-2775'</span>),
(7, <span class="string">'한의원'</span>, <span class="string">'송인한의원'</span>, <span class="string">'전라남도 순천시 중앙로 75, 1층 (저전동)'</span>, <span class="string">'061-753-2735'</span>);
                </code></pre>
            </div>

            <!-- 예제 1: 모든 병원 정보 조회 -->
            <div>
                <h3 class="text-xl font-bold mb-2">1. 모든 병원 정보 조회</h3>
                <p class="text-sm text-gray-600 mb-4">`HOSPITALS` 테이블의 모든 컬럼(`type`, `name`, `address`, `phone`)과 모든 행을 조회합니다.</p>
                <pre class="sql-code"><code>
<span class="keyword">SELECT</span> *
<span class="keyword">FROM</span> HOSPITALS;
                </code></pre>
            </div>

            <!-- 예제 2: 특정 종류의 병원만 조회 -->
            <div>
                <h3 class="text-xl font-bold mb-2">2. 특정 종류의 병원만 조회</h3>
                <p class="text-sm text-gray-600 mb-4">병원 종류가 '치과의원'인 데이터만 필터링하여 조회합니다.</p>
                <pre class="sql-code"><code>
<span class="keyword">SELECT</span> *
<span class="keyword">FROM</span> HOSPITALS
<span class="keyword">WHERE</span> type = <span class="string">'치과의원'</span>;
                </code></pre>
            </div>

            <!-- 예제 3: 종류별 병원 개수 세기 -->
            <div>
                <h3 class="text-xl font-bold mb-2">3. 종류별 병원 개수 세기</h3>
                <p class="text-sm text-gray-600 mb-4">`GROUP BY`를 사용하여 병원 종류별 총 개수를 집계합니다.</p>
                <pre class="sql-code"><code>
<span class="keyword">SELECT</span> type, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> count
<span class="keyword">FROM</span> HOSPITALS
<span class="keyword">GROUP BY</span> type;
                </code></pre>
            </div>

            <!-- 예제 4: 특정 주소에 위치한 병원 찾기 -->
            <div>
                <h3 class="text-xl font-bold mb-2">4. 특정 주소에 위치한 병원 찾기</h3>
                <p class="text-sm text-gray-600 mb-4">`LIKE` 키워드를 사용하여 주소에 '왕지로'가 포함된 병원을 찾습니다.</p>
                <pre class="sql-code"><code>
<span class="keyword">SELECT</span> name, address
<span class="keyword">FROM</span> HOSPITALS
<span class="keyword">WHERE</span> address <span class="keyword">LIKE</span> <span class="string">'%왕지로%'</span>;
                </code></pre>
            </div>
        </div>
    </div>
</div>

<script>
    // CSV 데이터
    const csvData = `구분,의료기관명,의료기관주소(도로명),의료기관전화번호
한의원,담뜰한의원,"전라남도 순천시 왕지로 36, 2층 203호 (왕지동)",061-762-7577
한의원,하얀미한의원,"전라남도 순천시 왕지4길 9-12, 2층 (왕지동)",
한의원,송인한의원,"전라남도 순천시 중앙로 75, 1층 (저전동)",061-753-2735
한의원,홍대영한의원,"전라남도 순천시 중앙로 146-1, 1층 (매곡동)",061-751-1075
한의원,지리산쌍계한의원,"전라남도 순천시 왕지2길 13-7, 2층 (왕지동)",061-721-0012
한의원,아이누리한의원,"전라남도 순천시 해룡면 매안로 145, 2층 202호",061-723-0275
한의원,산들한의원,"전라남도 순천시 삼산로 101, 2층 203호 (용당동, 주상복합)",061-753-3701
한의원,웃장부부한의원,"전라남도 순천시 중앙로 235, 1층 (덕암동)",061-755-1075
한의원,늘푸른한의원,"전라남도 순천시 해룡면 신대2길 19, 303호 (신대리, 신대메가타운)",061-722-1075
한의원,정우한의원,"전라남도 순천시 하풍동 215-6",061-744-8848
한의원,행복한한의원,"전라남도 순천시 해룡면 신대로 179, 해광샹그릴라2차아파트 101-102호 상가동",061-726-5575
한의원,바른정한의원,"전라남도 순천시 연향동 1530-10",061-723-5575
한의원,자연담은한의원,"전라남도 순천시 해룡면 신대지구2길 6, 401호 (신대리, 신대메디컬프라자)",061-721-0010
의원,이소아과의원,"전라남도 순천시 조례못등길 54, 조은프라자 3층",061-722-7900
의원,우리들내과의원,"전라남도 순천시 연향번영길 87 (연향동)",061-725-7582
의원,순천정신과의원,"전라남도 순천시 금곡길 36, 2층 (금곡동)",061-743-3003
의원,하나연합의원,"전라남도 순천시 해룡면 신대2길 19, 302호 (신대리, 신대메가타운)",061-722-7275
의원,참빛의원,"전라남도 순천시 중앙로 227-2 (덕암동)",061-753-2775
의원,대진산부인과의원,"전라남도 순천시 남신월길 50 (가곡동)",061-753-1577
의원,박성준소아청소년과의원,"전라남도 순천시 이수로 279, 3층 (조례동)",061-723-7575
의원,윤정원소아과의원,"전라남도 순천시 해룡면 신대로 199, 302호 (신대리, 신대메디컬센터)",061-722-8275
의원,아름다운소아과의원,"전라남도 순천시 해룡면 매안로 145, 301호 (복성리, 신대메디컬프라자)",061-723-1122
의원,미래내과의원,"전라남도 순천시 해룡면 신대1길 29, 2층 (신대리, 센트럴빌딩)",061-722-0050
의원,오승준의원,"전라남도 순천시 이수로 131, 2층 (조례동)",061-722-9111
의원,새로운내과의원,"전라남도 순천시 해룡면 신대로 177, 2층 (신대리)",061-726-0005
치과의원,새이화치과의원,"전라남도 순천시 왕지2길 17 (왕지동)",061-722-2875
치과의원,서울치과의원,"전라남도 순천시 구암길 2 (연향동)",061-744-2875
치과의원,이사랑치과의원,"전라남도 순천시 해룡면 장선배기길 272, 부영6차가동 2층 3,4호",061-725-2804
치과의원,프롬치과의원,"전라남도 순천시 왕궁길 47, 2층 (조례동)",061-725-2775
치과의원,순천수치과의원,"전라남도 순천시 중앙로 353, 2층 (가곡동)",061-752-6511
치과의원,박석환치과의원,"전라남도 순천시 해룡면 장선배기길 284, 청솔@상가동 201호",061-725-2882
치과의원,라임치과의원,"전라남도 순천시 이수로 321, 4층 (조례동)",061-721-2804
치과의원,스마일치과의원,"전라남도 순천시 기적의도서관길 90, 2층 212호 (부영3차아파트)",061-724-2828
치과의원,누가치과의원,"전라남도 순천시 중앙로 74 (장천동)",061-744-9972
치과의원,더쎈치과의원,"전라남도 순천시 중앙로 235, 3층 (덕암동)",061-754-0028
치과의원,명성치과의원,"전라남도 순천시 중앙로 316, 2층 (가곡동)",061-752-2828
치과의원,연세플란트치과의원,"전라남도 순천시 팔마로 221, 203호 (풍덕동)",061-743-2828
치과의원,박재현치과의원,"전라남도 순천시 조례1길 19, 2층 (조례동)",061-745-0019
치과의원,김종진치과의원,"전라남도 순천시 팔마로 218-1 (풍덕동)",061-746-2889
치과의원,고은치과의원,"전라남도 순천시 조례1길 34, 2층 (조례동)",061-742-2875
치과의원,정다운치과의원,"전라남도 순천시 연향동 1324-11",061-721-2875
치과의원,새길치과의원,"전라남도 순천시 조례못등길 54, 3층 (조례동)",061-723-2875
치과의원,삼성치과의원,"전라남도 순천시 이수로 279, 2층 (조례동)",061-722-2828`;

    // CSV 파싱 및 데이터 집계
    function parseCsv(csv) {
        const lines = csv.trim().split('\n');
        const headers = lines[0].split(',');
        const data = {};

        // 정규식으로 따옴표 안의 쉼표를 무시하고 분리
        const lineParser = (line) => line.match(/(?:[^,"]+|"[^"]*")+/g).map(v => v.replace(/"/g, '').trim());

        for (let i = 1; i < lines.length; i++) {
            const values = lineParser(lines[i]);
            const type = values[0];
            const name = values[1];
            const address = values[2];
            
            if (type) {
                if (!data[type]) {
                    data[type] = { count: 0, list: [] };
                }
                data[type].count += 1;
                data[type].list.push({ name, address });
            }
        }
        return data;
    }

    window.onload = function() {
        const hospitalData = parseCsv(csvData);

        // Chart.js를 위한 데이터 준비
        const labels = Object.keys(hospitalData);
        const data = Object.values(hospitalData).map(item => item.count);
        const colors = ['#38a169', '#3182ce', '#ed8936']; // Tailwind colors: green, blue, orange

        const ctx = document.getElementById('hospitalChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: labels,
                datasets: [{
                    label: '병원 종류별 개수',
                    data: data,
                    backgroundColor: colors,
                    borderColor: '#ffffff',
                    borderWidth: 2,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: false,
                    }
                }
            }
        });

        // 상세 정보 목록 생성
        const detailsContainer = document.getElementById('detailsContainer');
        labels.forEach(type => {
            const hospitals = hospitalData[type].list;
            const hospitalCount = hospitalData[type].count;
            
            // 컨테이너 요소 생성
            const toggleButton = document.createElement('div');
            toggleButton.className = 'toggle-button rounded-xl shadow-md transition-all duration-300 hover:bg-gray-200';
            toggleButton.innerHTML = `<span class="text-lg font-semibold">${type} (${hospitalCount}개)</span><span class="transform transition-transform duration-300">▼</span>`;

            const detailsSection = document.createElement('div');
            detailsSection.className = 'details-section p-4 rounded-xl shadow-sm';

            const ul = document.createElement('ul');
            ul.className = 'list-disc list-inside space-y-2';

            hospitals.forEach(h => {
                const li = document.createElement('li');
                li.innerHTML = `<p class="font-bold text-gray-800">${h.name}</p><p class="text-sm text-gray-500">${h.address}</p>`;
                ul.appendChild(li);
            });

            detailsSection.appendChild(ul);
            detailsContainer.appendChild(toggleButton);
            detailsContainer.appendChild(detailsSection);

            // 토글 기능 추가
            toggleButton.addEventListener('click', () => {
                const arrow = toggleButton.querySelector('span:last-child');
                detailsSection.classList.toggle('open');
                arrow.classList.toggle('rotate-180');
            });
        });
    };
</script>

</body>
</html>
